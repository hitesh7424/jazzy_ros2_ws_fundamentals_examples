# GTest for C++ Publisher Node

## Topics Covered

- How to create and run Google Test (GTest) unit tests for a ROS 2 C++ publisher node.

## Steps to Build and Test with GTest

1. **Build the Package**

   ```bash
   colcon build --packages-select ros2_fundamental_examples
   ```

2. **Run the Tests**

   ```bash
   colcon test --packages-select ros2_fundamental_examples
   colcon test --packages-select ros2_fundamental_examples --event-handlers console_direct+
   colcon test-result --all
   colcon test-result --all --verbose
   ```

## Notes

- Ensure your test file (e.g., `test_publisher.cpp`) is located in the `test/gtest` directory of your package.
- Update your `CMakeLists.txt` to add the GTest executable and link against the required libraries:

  ```cmake
  if(BUILD_TESTING)
    find_package(ament_cmake_gtest REQUIRED)
    ament_add_gtest(test_publisher test/gtest/test_publisher.cpp)
    target_link_libraries(test_publisher ${rclcpp_LIBRARIES})
  endif()
  ```

- Add `<test_depend>ament_cmake_gtest</test_depend>` to your `package.xml`.
- Use `colcon test-result --all --verbose` to see detailed test output and debug any failures.

## References

- [ROS 2 Testing Guide](https://docs.ros.org/en/rolling/How-To-Guides/Unit-Testing-ROS2-Packages.html)
- [Google Test Documentation](https://google.github.io/googletest/)
